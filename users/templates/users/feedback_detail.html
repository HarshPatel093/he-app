{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="feedback-detail-container">
  <div class="feedback-card">
    <h2>Feedback Details</h2>

    <div class="feedback-info">

      <!-- Mood Row -->
      <div class="mood-row">
        <strong>Mood:</strong>
        <div class="emoji-inline">
          {% if feedback.mood == 1 %}
            <!-- Very Unhappy -->
            <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg" class="emoji-icon">
              <g id="color">
                <path fill="#FCEA2B" d="M36,13c-12.6823,0-23,10.3177-23,23c0,12.6822,10.3177,23,23,23c12.6822,0,23-10.3178,23-23 C59,23.3177,48.6822,13,36,13z"/>
              </g>
              <g id="line">
                <circle cx="36" cy="36" r="23" fill="none" stroke="#000000" stroke-width="2"/>
                <path d="M30,32.9c0,1.65-1.34,3-3,3s-3-1.35-3-3s1.34-3,3-3S30,31.25,30,32.9"/>
                <path d="M48,32.9c0,1.65-1.34,3-3,3s-3-1.35-3-3s1.34-3,3-3S48,31.25,48,32.9"/>
                <line x1="23" x2="30" y1="24" y2="28" stroke="#000" stroke-linecap="round" stroke-width="2"/>
                <line x1="49" x2="42" y1="24" y2="28" stroke="#000" stroke-linecap="round" stroke-width="2"/>
                <path d="M29.5,43c1.28-0.64,3.98-1.03,6.84-1c2.62,0.03,4.99,0.41,6.16,1" stroke="#000" stroke-linecap="round" stroke-width="2"/>
              </g>
            </svg>
            <span class="mood-text">Very Unhappy</span>

          {% elif feedback.mood == 2 %}
            <!-- Unhappy -->
            <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg" class="emoji-icon">
              <g id="color">
                <path fill="#FCEA2B" d="M36,13c-12.6823,0-23,10.3177-23,23c0,12.6822,10.3177,23,23,23c12.6822,0,23-10.3178,23-23 C59,23.3177,48.6822,13,36,13z"/>
              </g>
              <g id="line">
                <circle cx="36" cy="36" r="23" fill="none" stroke="#000000" stroke-width="2"/>
                <path d="M30,31c0,1.6568-1.3448,3-3,3c-1.6553,0-3-1.3433-3-3c0-1.6552,1.3447-3,3-3C28.6552,28,30,29.3448,30,31"/>
                <path d="M48,31c0,1.6568-1.3447,3-3,3s-3-1.3433-3-3c0-1.6552,1.3447-3,3-3S48,29.3448,48,31"/>
                <path fill="none" stroke="#000" stroke-linecap="round" stroke-width="2" d="M28,46c1.5805-2.5575,4.9043-4.1349,8.4211-4.0038C39.6499,42.1166,42.5622,43.6595,44,46"/>
              </g>
            </svg>
            <span class="mood-text">Unhappy</span>

          {% elif feedback.mood == 3 %}
            <!-- Neutral -->
            <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg" class="emoji-icon">
              <g id="color">
                <path fill="#FCEA2B" d="M36,13c-12.6823,0-23,10.3177-23,23c0,12.6822,10.3177,23,23,23c12.6822,0,23-10.3178,23-23 C59,23.3177,48.6822,13,36,13z"/>
              </g>
              <g id="line">
                <circle cx="36" cy="36" r="23" fill="none" stroke="#000000" stroke-width="2"/>
                <line x1="27" x2="45" y1="43" y2="43" stroke="#000" stroke-linecap="round" stroke-width="2"/>
                <path d="M30,31c0,1.65-1.34,3-3,3s-3-1.35-3-3s1.34-3,3-3S30,29.35,30,31"/>
                <path d="M48,31c0,1.65-1.34,3-3,3s-3-1.35-3-3s1.34-3,3-3S48,29.35,48,31"/>
              </g>
            </svg>
            <span class="mood-text">Neutral</span>

          {% elif feedback.mood == 4 %}
            <!-- Happy -->
            <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg" class="emoji-icon">
              <g id="color"><circle cx="36" cy="36" r="23" fill="#FCEA2B"/></g>
              <g id="line">
                <circle cx="36" cy="36" r="23" fill="none" stroke="#000" stroke-width="2"/>
                <path fill="none" stroke="#000" stroke-linecap="round" stroke-width="2" d="M45.8,44.9c-2.9,1.64-6.25,2.57-9.81,2.57s-6.91-0.93-9.81-2.57"/>
                <path d="M30,31c0,1.65-1.34,3-3,3s-3-1.35-3-3s1.34-3,3-3S30,29.35,30,31"/>
                <path d="M48,31c0,1.65-1.34,3-3,3s-3-1.35-3-3s1.34-3,3-3S48,29.35,48,31"/>
              </g>
            </svg>
            <span class="mood-text">Happy</span>

          {% elif feedback.mood == 5 %}
            <!-- Very Happy -->
            <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg" class="emoji-icon">
              <g id="color">
                <circle cx="36" cy="36" r="23" fill="#FCEA2B"/>
                <path fill="#EA5A47" d="M49.7,46.1c-1.79,4.27-6.35,7.23-13.69,7.23c-7.41,0-12.03-3.03-13.8-7.36 C24.3,46.47,37.24,49.16,49.7,46.13z"/>
              </g>
              <g id="line">
                <circle cx="36" cy="36" r="23" fill="none" stroke="#000" stroke-width="2"/>
                <path d="M30,31c0,1.65-1.34,3-3,3s-3-1.35-3-3s1.34-3,3-3S30,29.35,30,31"/>
                <path d="M48,31c0,1.65-1.34,3-3,3s-3-1.35-3-3s1.34-3,3-3S48,29.35,48,31"/>
                <path d="M49.7,46.1c-1.79,4.27-6.35,7.23-13.69,7.23c-7.41,0-12.03-3.03-13.8-7.36C24.3,46.47,37.24,49.16,49.7,46.13z" stroke="#000" stroke-width="2"/>
              </g>
            </svg>
            <span class="mood-text">Very Happy</span>
          {% else %}
            <span class="mood-text">N/A</span>
          {% endif %}
        </div>
      </div>

      <p><strong>Client:</strong> {{ feedback.user.get_full_name|default:feedback.user.username }}</p>
      <p><strong>Feedback:</strong> {{ feedback.comment|default:"No comment provided" }}</p>
      <p><strong>Date:</strong> {{ feedback.created_at|date:"M d, Y" }}</p>

      <p><strong>Photo:</strong>
        {% if feedback.photo %}
          <br>
          <img src="{{ feedback.photo.url }}" alt="Feedback Photo" class="photo-preview">
        {% else %}
          N/A
        {% endif %}
      </p>
    </div>

    <a href="{%url 'feedback_pdf_download' feedback.id%}" class="btn btn-secondary" style="background-color:#007bff; color:white; padding:8px 16px; border-radius:6px; text-decoration:none; margin-bottom:10px; display:inline-block;">
      Download as PDF </a>
    <a href="{% url 'feedback' %}" class="back-btn">‚Üê Back to Feedback List</a>
  </div>
</div>

<style>
.feedback-detail-container {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 80vh;
  background-color: #f5f8ff;
}

.feedback-card {
  background: #ffffff;
  padding: 2rem;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  max-width: 550px;
}

.feedback-card h2 {
  text-align: center;
  color: #023e8a;
  margin-bottom: 1.5rem;
}

.feedback-info p {
  margin: 0.8rem 0;
  font-size: 1rem;
}

.mood-row {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 0.8rem 0;
}

.emoji-inline {
  display: flex;
  align-items: center;
  gap: 8px;
}

.emoji-icon {
  width: 32px;
  height: 32px;
  vertical-align: middle;
}

.photo-preview {
  margin-top: 0.5rem;
  max-width: 100%;
  border-radius: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.back-btn {
  display: block;
  margin: 1.5rem auto 0;
  background-color: #28a745;
  color: white;
  padding: 8px 16px;
  border-radius: 6px;
  text-decoration: none;
  font-weight: 500;
  transition: background 0.3s;
}

.back-btn:hover {
  background-color: #218838;
}
</style>
{% endblock %}
