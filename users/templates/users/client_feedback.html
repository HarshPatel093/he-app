<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@700&display=swap" rel="stylesheet">
  <title>Client Feedback</title>
  <style>
    body {
      margin: 0;
      font-family: 'Nunito Sans', sans-serif;
      background-color: #f5f7ff;
    }

    .container {
      max-width: 420px;
      margin: 5vh auto;
      padding: 4vw;
      border-radius: 10px;
      text-align: center;
      background: #f5f7ff;
    }

    h1 {
      font-size: clamp(18px, 2.5vw, 24px);
      font-family: 'Nunito Sans', Arial, sans-serif;
      font-weight: bold;
      margin-bottom: 20px;
      color: #111;
      margin-top: -10px; 
    }

    .faces {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin: 2vh auto;
      max-width: fit-content;
      margin-top: -5px;
      margin-bottom: 5px;
    }

    .face {
      width: clamp(56px, 10vw, 72px); 
      height: clamp(56px, 10vw, 72px);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .face svg {
      width: 100%; 
      height: auto;
      object-fit: contain;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      filter:none;
      border: 3px solid transparent;
      border-radius: 50%;
    }

    .face input {
      position: absolute;
      opacity: 0;
      width: 1px;
      height: 1px;
      overflow: hidden;
    }

    .face input:checked ~ svg {
      transform: scale(1.2);
      filter: none;
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      margin: -1px;
      padding: 0;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }

    fieldset {
      border: none;
      padding: 0;
      margin: 0;
    }

    textarea {
      width: 80%;
      height: clamp(120px, 50vh, 200px);
      margin-top: 2vh;
      padding: 1em;
      border: 1px solid #ddd;
      border-radius: 8px;
      resize: none;
      font-size: clamp(12px, 2vw, 16px);
      background: #fff;
    }

    textarea::placeholder {
      color: #888;
      text-transform: uppercase;
      font-size: clamp(11px, 1.5vw, 13px);
    }

    .btn {
      display: block;
      width: 88%;
      margin-top: 2vh;
      padding: 1em;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      font-size: clamp(12px, 2vw, 14px);
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      box-sizing: border-box;
      margin-left: auto;      
      margin-right: auto;
    }

    .btn-primary {
      background: #fff;
      color: #264AE5;
    }

    .btn-submit {
      background: #fff;
      color: #000;
    }

    #preview {
      max-width: 200px;
      display: none;
      margin: 10px auto 0; 
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 4px;
      background: #fff;
    }

    #photo-actions {
      display: flex;
      justify-content: center;
      gap: 10px; /* space between buttons */
    }

    .btn-small {
      width: auto;
      padding: 6px 12px;
      font-size: 12px;
      margin: 0;
    }


    /* Phones */
    @media (max-width: 600px) {
      h1 {
        font-size: 30px;
      }
      .faces {
        gap: 14px;
      }
      .face svg {
        width: 45px;
      }
      textarea {
        font-size: 12px;
        height: 120px;
      }
      .btn {
        font-size: 12px;
        padding: 15px;
      }
    }

    /* Tablets */
    @media (min-width: 601px) and (max-width: 1024px) {
      h1 {
        font-size: 32px;
      }
      .faces {
        gap: 14px; 
      }
      .face svg {
        width: 48px;
      }
      textarea {
        font-size: 14px;
        height: 160px;
      }
      .btn {
        font-size: 14px;
        padding: 18px;
      }
    }

    /* Desktops */
    @media (min-width: 1025px) {
      h1 {
        font-size: 35px;
      }
      .faces {
        gap: 10px;
      }
      .face svg {
        width: 60px;
      }
      textarea {
        font-size: 16px;
        height: 140px;
      }
      .btn {
        font-size: 16px;
        padding: 14px;
      }
    }
  </style>
</head>
<body>
  <main>
    <form id="feedbackForm" method="POST" enctype="multipart/form-data" action="{% url 'client_feedback' %}">
      {% csrf_token %}
      <div class="container">
        <div id="feedback-form">
          <h1>Select how you feel</h1>
            <fieldset>
              <legend class="sr-only">Select how you feel</legend>
              <div class="faces">
                <label class="face">
                  <input type="radio" name="mood" value="1">
                  <span class="sr-only">Very Unhappy</span>
                  <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
                    <g id="color">
                      <path fill="#FCEA2B" d="M36,13c-12.6823,0-23,10.3177-23,23c0,12.6822,10.3177,23,23,23c12.6822,0,23-10.3178,23-23 C59,23.3177,48.6822,13,36,13z"/>
                    </g>
                    <g id="hair"/>
                    <g id="skin"/>
                    <g id="skin-shadow"/>
                    <g id="line">
                      <circle cx="36" cy="36" r="23" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-width="2"/>
                      <path d="M30,32.9252c0,1.6567-1.3448,3-3,3c-1.6553,0-3-1.3433-3-3c0-1.6553,1.3447-3,3-3C28.6552,29.9252,30,31.27,30,32.9252"/>
                      <path d="M48,32.9252c0,1.6567-1.3447,3-3,3s-3-1.3433-3-3c0-1.6553,1.3447-3,3-3S48,31.27,48,32.9252"/>
                      <line x1="23" x2="30" y1="24" y2="28" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                      <line x1="49" x2="42" y1="24" y2="28" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                      <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" d="M29.5,43c1.2841-0.6376,3.9847-1.0308,6.8421-0.9981c2.6235,0.03,4.9897,0.4146,6.1579,0.9981"/>
                    </g>
                  </svg>
                </label>
                <label class="face">
                  <input type="radio" name="mood" value="2">
                  <span class="sr-only">Unhappy</span>
                  <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
                    <g id="color">
                      <path fill="#FCEA2B" d="M36,13c-12.6823,0-23,10.3177-23,23c0,12.6822,10.3177,23,23,23c12.6822,0,23-10.3178,23-23 C59,23.3177,48.6822,13,36,13z"/>
                    </g>
                    <g id="hair"/>
                    <g id="skin"/>
                    <g id="skin-shadow"/>
                    <g id="line">
                      <circle cx="36" cy="36" r="23" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-width="2"/>
                      <path d="M30,31c0,1.6568-1.3448,3-3,3c-1.6553,0-3-1.3433-3-3c0-1.6552,1.3447-3,3-3C28.6552,28,30,29.3448,30,31"/>
                      <path d="M48,31c0,1.6568-1.3447,3-3,3s-3-1.3433-3-3c0-1.6552,1.3447-3,3-3S48,29.3448,48,31"/>
                      <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" d="M28,46c1.5805-2.5575,4.9043-4.1349,8.4211-4.0038C39.6499,42.1166,42.5622,43.6595,44,46"/>
                    </g>
                  </svg>
                </label>
                <label class="face">
                  <input type="radio" name="mood" value="3">
                  <span class="sr-only">Neutral</span>
                  <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
                    <g id="color">
                      <path fill="#FCEA2B" d="M36,13c-12.6823,0-23,10.3177-23,23c0,12.6822,10.3177,23,23,23c12.6822,0,23-10.3178,23-23 C59,23.3177,48.6822,13,36,13z"/>
                    </g>
                    <g id="hair"/>
                    <g id="skin"/>
                    <g id="skin-shadow"/>
                    <g id="line">
                      <circle cx="36" cy="36" r="23" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-width="2"/>
                      <line x1="27" x2="45" y1="43" y2="43" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2"/>
                      <path d="M30,31c0,1.6568-1.3448,3-3,3c-1.6553,0-3-1.3433-3-3c0-1.6552,1.3447-3,3-3C28.6552,28,30,29.3448,30,31"/>
                      <path d="M48,31c0,1.6568-1.3447,3-3,3s-3-1.3433-3-3c0-1.6552,1.3447-3,3-3S48,29.3448,48,31"/>
                    </g>
                  </svg>
                </label>
                <label class="face">
                  <input type="radio" name="mood" value="4">
                  <span class="sr-only">Happy</span>
                  <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
                    <g id="color">
                      <circle cx="36.0001" cy="36" r="22.9999" fill="#FCEA2B"/>
                    </g>
                    <g id="hair"/>
                    <g id="skin"/>
                    <g id="skin-shadow"/>
                    <g id="line">
                      <circle cx="36" cy="36" r="23" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                      <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M45.8149,44.9293 c-2.8995,1.6362-6.2482,2.5699-9.8149,2.5699s-6.9153-0.9336-9.8149-2.5699"/>
                      <path d="M30,31c0,1.6568-1.3448,3-3,3c-1.6553,0-3-1.3433-3-3c0-1.6552,1.3447-3,3-3C28.6552,28,30,29.3448,30,31"/>
                      <path d="M48,31c0,1.6568-1.3447,3-3,3s-3-1.3433-3-3c0-1.6552,1.3447-3,3-3S48,29.3448,48,31"/>
                    </g>
                  </svg>
                </label>
                <label class="face">
                  <input type="radio" name="mood" value="5">
                  <span class="sr-only">Very Happy</span>
                  <svg id="emoji" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
                    <g id="color">
                      <circle cx="36" cy="36" r="23" fill="#FCEA2B"/>
                      <path fill="#FFFFFF" d="M50.595,41.64c0.012,1.5397-0.2838,3.0662-0.87,4.49c-12.49,3.03-25.43,0.34-27.49-0.13 c-0.5588-1.3852-0.8407-2.8664-0.83-4.36h0.11c0,0,14.8,3.59,28.89,0.07L50.595,41.64z"/>
                      <path fill="#EA5A47" d="M49.7251,46.13c-1.79,4.27-6.35,7.23-13.69,7.23c-7.41,0-12.03-3.03-13.8-7.36 C24.2951,46.47,37.235,49.16,49.7251,46.13z"/>
                    </g>
                    <g id="hair"/>
                    <g id="skin"/>
                    <g id="skin-shadow"/>
                    <g id="line">
                      <circle cx="36" cy="36" r="23" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                      <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M50.595,41.64 c0.012,1.5397-0.2838,3.0662-0.87,4.49c-12.49,3.03-25.43,0.34-27.49-0.13c-0.5588-1.3852-0.8407-2.8664-0.83-4.36h0.11 c0,0,14.8,3.59,28.89,0.07L50.595,41.64z"/>
                      <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M49.7251,46.13 c-1.79,4.27-6.35,7.23-13.69,7.23c-7.41,0-12.03-3.03-13.8-7.36C24.2951,46.47,37.235,49.16,49.7251,46.13z"/>
                      <path d="M30,31c0,1.6568-1.3448,3-3,3c-1.6553,0-3-1.3433-3-3c0-1.6552,1.3447-3,3-3C28.6552,28,30,29.3448,30,31"/>
                      <path d="M48,31c0,1.6568-1.3447,3-3,3s-3-1.3433-3-3c0-1.6552,1.3447-3,3-3S48,29.3448,48,31"/>
                    </g>
                  </svg>
                </label>
            </div>
          </fieldset>  
          <p id="mood-selected" class="sr-only" aria-live="polite"></p>
          <div id="mood-error" style="color:#b00020; font-size:18px; display:none; margin-top:4px;">
            Please select how you feel.
          </div>
          <input type="file" aria-label="Image" id="photoInput" name="photo" accept="image/*" capture="camera" style="display:none;">
          <textarea name="comment" aria-label="Optional_Comment" placeholder="Tell us how you feel (optional)"></textarea>
          <button type="button" class="btn btn-primary" onclick="openCamera()">Click here to upload a photo now! 📷 (optional)</button>
          <button type="submit" class="btn btn-submit">Submit</button>
          <img id="preview" alt="Preview of uploaded photo" style="max-width:200px; display:none; margin-top:10px;"/>
          <div id="photo-actions" style="display:none; margin-top:8px;">
            <button type="button" class="btn btn-primary" onclick="retakePhoto()">Retake</button>
            <button type="button" class="btn btn-submit" onclick="deletePhoto()">Delete</button>
          </div>
        </div>
      </div>
    </form>
  </main>

  <script>
    function openCamera() {
      document.getElementById("photoInput").click();
    }

    document.getElementById("photoInput").addEventListener("change", function(event) {
      if (event.target.files && event.target.files[0]) {
        let reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById("preview").src = e.target.result;
          document.getElementById("preview").style.display = "block";
          document.getElementById("photo-actions").style.display = "block"; 
        };
        reader.readAsDataURL(event.target.files[0]);
      }
    });

    document.getElementById("feedbackForm").addEventListener("submit", function(e) {
      let moodSelected = document.querySelector('input[name="mood"]:checked');

      if (!moodSelected) {
        e.preventDefault();
        document.getElementById("mood-error").style.display = "block";
      } else {
        document.getElementById("mood-error").style.display = "none";
      }
    });

    function retakePhoto() {
      document.getElementById("photoInput").click();
    }

    function deletePhoto() {
      document.getElementById("photoInput").value = "";
      document.getElementById("preview").src = "";
      document.getElementById("preview").style.display = "none";
      document.getElementById("photo-actions").style.display = "none";
    }

  document.querySelectorAll('input[name="mood"]').forEach(radio => {
    radio.addEventListener("change", function() {
      const label = this.getAttribute("aria-label");
      document.getElementById("mood-selected").innerText = `You selected: ${label}`;
    });
  });
</script>
</body>
</html>
